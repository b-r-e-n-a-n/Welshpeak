<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Welshpeak</title>
  </head>
  <body>
    <h1>Welshpeak</h1>
    <p>IPA → Welsh TTS (browser-only)</p>

    <textarea id="ipaInput" rows="3" cols="40" placeholder="Type IPA here..."></textarea><br/>
    <button id="playBtn">Play</button>
    <button id="stopBtn">Stop</button>

    <!-- eSpeak-NG loader -->
    <script type="module">
      import initEspeak from "./vendor/espeakng/espeak-ng.js";

      let Module = null;

      try {
        // Try to initialize with explicit WASM path
        Module = await initEspeak({
          locateFile: (path) => `./vendor/espeakng/${path}`
        });
        console.log("eSpeak-NG initialized?", !!Module);
      } catch (err) {
        console.error("eSpeak-NG init failed:", err);
      }

      // Button handlers
      document.getElementById("playBtn").onclick = () => {
        if (Module) {
          alert("Engine loaded ✅ (next step: actual speech)");
        } else {
          alert("Engine not loaded ❌ — check console");
        }
      };

      document.getElementById("stopBtn").onclick = () => {
        console.log("Stop clicked (no-op for now)");
      };
    </script>
  </body>
</html>
